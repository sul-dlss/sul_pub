<div class="center hero-unit">
<h2>Resource Description</h2>

<b style="font-size:large">http://sulcap.stanford.edu/publications</b>

<hr style="color:#000;background-color:#000;border-color:#000"/>

<h2 style="font-size:medium">HTTP Methods</h2>

<table class="table table-striped">       
        <tbody>
          <thead>
          <tr>
            <th>Method</th>
            <th>Description</th>
            <th>Request Entity</th>
            <th>Response Entity</th>
          </tr>
        </thead>
          <tr>
            <td>OPTIONS</td>
            <td>Lists available methods.</td>
            <td>None.</td>
            <td>No body - lists methods in 'Allow' header.</td>               
          </tr>
          <tr>
            <td>POST</td>
            <td>Creates publication record.</td>
            <td>BibJSON record(s) for publication(s). See sample below.</td>
            <td>BibJSON for successfully updated pubication(s).</td>
          </tr>
          <tbody>
</table>
<hr style="color:#000;background-color:#000;border-color:#000"/>
<h2 style="font-size:medium">HTTP Request Headers</h2>

<table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Allowable Values</th>
            <th>Description</th>
            <th>Applies To</th>
            <th>Required?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Accept</td>
            <td>application/json</td>
            <td>Only json for now.</td>
            <td>POST</td>
            <td>No</td>
          </tr>
          <tr>
            <td>Content-Type</td>
            <td>text/bibliography application/json</td>
            <td>The content type for submitted entity.</td>
            <td>POST</td>
            <td>Yes</td>   
          </tr>
          <tr>
            <td>Stan-Key</td>
            <td>N/A</td>
            <td>Authentication Key</td>
            <td>POST, OPTIONS</td>
            <td>Yes</td>       
          </tr>          
        </tbody>
      </table>

<hr style="color:#000;background-color:#000;border-color:#000"/>
<h2 style="font-size:medium">HTTP Response Headers</h2>

<table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Allowable Values</th>
            <th>Description</th>
            <th>Applies To</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ETag</td>
            <td></td>
            <td></td>
            <td>POST</td>
          </tr>
          <tr>
            <td>Content-Type</td>
            <td>application/json</td>
            <td>Content type of returned entity</td>
            <td>POST</td>
          </tr>
          <tr>
            <td>Allow</td>
            <td>Method Names</td>
            <td>Lists allowed methods at URI</td>
            <td>OPTIONS</td>     
          </tr>
         
        </tbody>
      </table>

<hr style="color:#000;background-color:#000;border-color:#000"/>
<h2 style="font-size:medium">HTTP Status Codes</h2>

<table class="table table-striped">
        <thead>
          <tr>
            <th>Code</th>
            <th>Description</th>
            <th>Applies To</th>
            <th>Entity returned</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>201</td>
            <td>Created - Entity successfully created</td>
            <td>POST</td>
            <td>BibJSON for new record(s)</td>
          </tr>    
          <tr>
            <td>303</td>
            <td>See Other - duplicate post</td>
            <td>POST</td>
            <td>error indicating this is a duplicate post</td>
          </tr>  
          <tr>
            <td>400</td>
            <td>Bad Request</td>
            <td>POST</td>
            <td>Message: Invalid BibJSON </td>
          </tr>  
          <tr>
            <td>401</td>
            <td>Unauthorized</td>
            <td>POST, OPTIONS</td>
            <td>None</td>
          </tr>  
          <tr>
            <td>405</td>
            <td>Method Not Allowed</td>
            <td>GET, HEAD, PUT, PATCH</td>
            <td>No Entity, but allowed methods listed in Allow header</td>
          </tr> 
          <tr>
            <td>406</td>
            <td>Not Acceptable - Can't satisfy request accept header</td>
            <td>GET</td>
            <td>None</td>
          </tr> 
          <tr>
            <td>412</td>
            <td>PreCondition Failed - ETag value in If-Match header is old</td>
            <td>PUT</td>
            <td>None</td>
          </tr> 
           <tr>
            <td>415</td>
            <td>Unsupported Media Type - POST entity with wrong Content-Type</td>
            <td>PUT</td>
            <td>None</td>
          </tr> 
          <tr>
            <td>428</td>
            <td>Precondition Requied - ETag must be supplied in If-Match header</td>
            <td>PUT</td>
            <td>None</td>
          </tr> 
          <tr>
            <td>204</td>
            <td>No Content - Successful, but no entity returned.</td>
            <td>OPTIONS</td>
            <td>None</td>
          </tr>     
        </tbody>
      </table>

<hr style="color:#000;background-color:#000;border-color:#000"/>

<h2 style="font-size:medium">Samples</h2>

<p class="sultext">The POST call will accept one or or records in a single call.  The BibJSON must therefore be wrapped 
  in a json array, as in the example below.  Multiple BibTeX records are simply appended together. The bibjson must also
include the contribution section with either the CAP Profile ID for the author or the SUL Author ID for the author.</p>

<p style="font-size:small"><%= link_to "BibJSON file for POST", sul_bib_api_samples_path + '/post_pub_in_json' %></p>

<p style="font-size:small"><%= link_to "BibTex file for POST", sul_bib_api_samples_path + '/post_pub_in_bibtex' %></p>

<hr style="color:#000;background-color:#000;border-color:#000"/>
<h2 style="font-size:medium">Sample CURL calls</h2>

<table class="table table-striped">
       
        <tbody>
          <tr>
            <td>OPTIONS request.</td>
            <td>curl -v -x OPTIONS -3 --header 'yourAuthenticationKeyName: yourKeyValue' 'https://sulcap.stanford.edu/publications'</td>     
          </tr>    
          <tr>
            <td>POST request using file contents as body.</td>
            <td>curl -v -d @filename -3 --header 'yourAuthenticationKeyName: yourKeyValue' 'https://sulcap.stanford.edu/publications</td>      
          </tr>
          <tr>
            <td>POST request with BibJSON</td>
            <td>curl -v -d --header -3 'yourAuthenticationKeyName: yourKeyValue' "bibjson goes here" http://sulcap.stanford.edu/publications</td>      
          </tr>
        </tbody>
      </table>







 <!-- <%= link_to "GET /sulbib/v1/publications/1", '#', class: "btn btn-large btn-primary" %>  -->